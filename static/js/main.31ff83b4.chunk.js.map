{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","filter","onChangeInput","e","value","currentTarget","trim","setState","onSubmitForm","preventDefault","toast","props","onSubmit","className","s","searchbar","form","this","type","button","label","input","placeholder","onChange","inputValue","Component","ImageGalleryItem","url","alt","index","onClick","item","src","image","loading","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","width","height","axios","defaults","baseURL","params","key","image_type","orientation","per_page","fetchPhotoes","query","page","a","get","q","then","responce","data","api","ImageGallery","photoes","totalHits","status","showModal","onLoadMore","prevState","openModal","closeModal","setImage","scroll","scrollTo","top","behavior","getPhotoes","prevProps","prevFilter","newFilter","prevPage","newPage","setTimeout","hits","catch","finally","isNotLast","Number","length","error","gallery","map","webformatURL","tags","largeImageURL","color","App","onSearchBtn","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.31ff83b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3uqMl\",\"form\":\"Searchbar_form__29rVg\",\"button\":\"Searchbar_button__2sY-i\",\"label\":\"Searchbar_label__23tvq\",\"input\":\"Searchbar_input__2yfIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__8Uia7\",\"image\":\"ImageGalleryItem_image__7l7lY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1Q6hU\",\"modal\":\"Modal_modal__HFk5g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__xw7x2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__3DRaY\"};","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport { toast } from 'react-toastify';\r\n\r\nclass Searchbar extends Component {\r\n  state = { filter: '' };\r\n\r\n  onChangeInput = e => {\r\n    const value = e.currentTarget.value.trim();\r\n    this.setState({ filter: value });\r\n  };\r\n\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    const { filter } = this.state;\r\n    if (filter === '') {\r\n      return toast('Введите ваш запрос');\r\n    }\r\n    this.props.onSubmit(filter);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.form} onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onChangeInput}\r\n            value={this.state.inputValue}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ url, alt, index, onClick }) => {\r\n  return (\r\n    <>\r\n      <li className={s.item} onClick={() => onClick(index)} key={index}>\r\n        <img src={url} alt={alt} className={s.image} loading=\"lazy\" />\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  onClick: PropTypes.func,\r\n  images: PropTypes.array,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt, onClose } = this.props;\r\n    return createPortal(\r\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.modal}>\r\n          <img src={src} alt={alt} width=\"1024\" height=\"768\" />\r\n        </div>\r\n        <button type=\"button\" onClick={onClose}>\r\n          Закрыть\r\n        </button>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  onClose: PropTypes.func,\r\n};\r\n","import axios from 'axios';\r\n\r\nconst KEY = '22441039-e3c3a22ef42346706974d6393';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\naxios.defaults.params = {\r\n  key: KEY,\r\n  image_type: 'photo',\r\n  orientation: 'horizontal',\r\n  per_page: 12,\r\n};\r\nconst fetchPhotoes = async (query, page) => {\r\n  return await axios\r\n    .get('', {\r\n      params: {\r\n        q: query,\r\n        page,\r\n      },\r\n    })\r\n    .then(responce => responce.data);\r\n};\r\n\r\nconst api = {\r\n  fetchPhotoes,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\nimport Loader from 'react-loader-spinner';\r\nimport Modal from '../Modal';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport { toast } from 'react-toastify';\r\nimport s from './ImageGallery.module.css';\r\nimport api from '../../services/pixabay-api';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    page: null,\r\n    photoes: [],\r\n    totalHits: null,\r\n    status: 'idle',\r\n    filter: '',\r\n    index: null,\r\n    showModal: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ filter: this.props.filter, page: 1, index: null, showModal: false });\r\n    this.getPhotoes();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevFilter = prevProps.filter;\r\n    const newFilter = this.props.filter;\r\n    const prevPage = prevState.page;\r\n    const newPage = this.state.page;\r\n\r\n    if (prevFilter !== newFilter) {\r\n      this.setState(() => {\r\n        return { page: 1, filter: newFilter, status: 'pending', photoes: [] };\r\n      });\r\n      setTimeout(() => {\r\n        this.getPhotoes(newFilter, 1);\r\n        this.scroll();\r\n      }, 300);\r\n    }\r\n\r\n    if (prevPage < newPage) {\r\n      this.setState({ status: 'pending' }, () => this.getPhotoes());\r\n    }\r\n  }\r\n\r\n  getPhotoes() {\r\n    const { page, filter } = this.state;\r\n    api\r\n      .fetchPhotoes(filter, page)\r\n      .then(({ hits, totalHits }) => {\r\n        this.setState({ status: 'resolved', totalHits });\r\n        if (page > 1) {\r\n          this.setState(prevState => ({ photoes: [...prevState.photoes, ...hits] }));\r\n        }\r\n        if (page === 1) {\r\n          this.setState({ photoes: hits });\r\n        }\r\n      })\r\n      .catch(() => this.setState({ status: 'rejected' }))\r\n      .finally(() => this.scroll());\r\n  }\r\n\r\n  onLoadMore = () => {\r\n    this.setState(prevState => ({ page: prevState.page + 1 }));\r\n  };\r\n\r\n  openModal = () => {\r\n    this.setState({ showModal: true });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false, index: null });\r\n  };\r\n  setImage = index => {\r\n    this.setState({ index });\r\n    this.openModal();\r\n  };\r\n\r\n  scroll = () => {\r\n    window.scrollTo({\r\n      top: 1000,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { photoes, totalHits, status, index, showModal } = this.state;\r\n    const isNotLast = Number(totalHits) !== photoes.length ? true : false;\r\n    if (status === 'idle') {\r\n      return (\r\n        <div>\r\n          <p>Загружаем...</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return toast.error('Ваш запрос не найден');\r\n    }\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ul className={s.gallery}>\r\n            {photoes.map(({ webformatURL, tags }, index) => (\r\n              <ImageGalleryItem\r\n                url={webformatURL}\r\n                alt={tags}\r\n                index={index}\r\n                onClick={this.setImage}\r\n              />\r\n            ))}\r\n          </ul>\r\n          {isNotLast && <Button onClick={this.onLoadMore} />}\r\n          {showModal && (\r\n            <Modal\r\n              src={photoes[index].largeImageURL}\r\n              alt={photoes[index].tags}\r\n              onClick={this.openModal}\r\n              onClose={this.closeModal}\r\n            />\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n    if (status === 'pending') {\r\n      return <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />;\r\n    }\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  filter: PropTypes.string,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    filter: '',\n  };\n\n  onSearchBtn = filter => {\n    this.setState({ filter });\n  };\n\n  render() {\n    const { filter } = this.state;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSearchBtn} />\n        {filter.length > 0 && <ImageGallery filter={filter} />}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}