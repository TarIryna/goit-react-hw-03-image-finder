{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","inputValue","reset","setState","onChangeInput","e","currentTarget","value","trim","onSubmitForm","preventDefault","props","onSubmit","className","s","searchbar","form","this","type","button","label","input","placeholder","onChange","Component","ImageGalleryItem","url","name","id","item","src","alt","image","loading","Button","onClick","fetchPhotoes","page","perPage","query","console","log","params","key","q","image_type","orientation","safesearch","per_page","axios","get","then","responce","data","ImageGallery","photoes","totalHits","status","onLoadMore","prevState","prevProps","prevFilter","filter","newFilter","hits","catch","Number","toast","color","height","width","error","gallery","map","webformatURL","tags","App","onSearchBtn","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.76fcda6c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__8Uia7\",\"image\":\"ImageGalleryItem_image__7l7lY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__xw7x2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__3DRaY\"};","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = { inputValue: '' };\r\n\r\n  reset = () => {\r\n    this.setState({ inputValue: '' });\r\n  };\r\n\r\n  onChangeInput = e => {\r\n    this.setState({ inputValue: e.currentTarget.value.trim() });\r\n  };\r\n\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    this.props.onSubmit(this.state.inputValue);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.form} onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onChangeInput}\r\n            value={this.state.inputValue}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ url, name, id }) => {\r\n  return (\r\n    <li key={id} className={s.item}>\r\n      <img src={url} alt={name} className={s.image} loading=\"lazy\" />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  url: PropTypes.number,\r\n  name: PropTypes.string,\r\n  id: PropTypes.number,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button onClick={onClick} className={s.button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import axios from 'axios';\r\n\r\nfunction fetchPhotoes(page, perPage, query) {\r\n  console.log(query);\r\n  const params = {\r\n    key: '22723314-dcec60eea06497913e1a2cdb4',\r\n    q: query,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: true,\r\n    page: page,\r\n    per_page: perPage,\r\n  };\r\n\r\n  const URL = 'https://pixabay.com/api/';\r\n  return axios.get(URL, { params }).then(responce => responce.data);\r\n}\r\n// this.state.page > 1\r\n//   ? this.setState(prevState => ({ photoes: [...prevState.photoes, ...data.hits] }))\r\n//   : this.setState({ photoes: data.hits });\r\n// this.setState({ totalHits: data.totalHits });\r\n// this.setState(prevState => ({ page: prevState.page + 1 }));\r\nexport default fetchPhotoes;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\n// import axios from 'axios';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport { toast } from 'react-toastify';\r\nimport s from './ImageGallery.module.css';\r\nimport fetchPhotoes from '../../services/pixabay-api';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    page: 1,\r\n    photoes: null,\r\n    perPage: 12,\r\n    totalHits: null,\r\n    status: 'idle',\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const prevFilter = prevProps.filter;\r\n    const newFilter = this.props.filter;\r\n    console.log(prevFilter, ' и новый ', newFilter);\r\n    if (prevFilter !== newFilter) {\r\n      this.setState({ perPage: 12, status: 'pending' });\r\n      fetchPhotoes(1, this.state.perPage, newFilter)\r\n        .then(({ hits, totalHits }) => {\r\n          this.setState({ photoes: hits, status: 'resolved', totalHits });\r\n        })\r\n        .catch(() => this.setState({ status: 'rejected' }));\r\n    }\r\n  }\r\n  onLoadMore = () => {\r\n    this.setState(prevState => ({ perPage: prevState.perPage + 12 }));\r\n  };\r\n\r\n  render() {\r\n    const { photoes, perPage, totalHits, status } = this.state;\r\n    console.log(Number(totalHits) >= Number(perPage) || status === 'resolved');\r\n\r\n    if (status === 'idle') {\r\n      return toast('Введите ваш запрос!');\r\n    }\r\n    if (status === 'pending') {\r\n      return <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />;\r\n    }\r\n    if (status === 'rejected') {\r\n      return toast.error('Ваш запрос не найден');\r\n    }\r\n    if (status === 'resolved') {\r\n      return (\r\n        <ul className={s.gallery}>\r\n          {photoes.map(({ webformatURL, id, tags }) => (\r\n            <ImageGalleryItem url={webformatURL} name={tags} id={id} />\r\n          ))}\r\n        </ul>\r\n      );\r\n    }\r\n    if (Number(totalHits) >= Number(perPage) || status === 'resolved') {\r\n      return <Button onClick={this.onLoadMore} />;\r\n    }\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  filter: PropTypes.string,\r\n  perPage: PropTypes.number,\r\n  page: PropTypes.number,\r\n  totalHits: PropTypes.number,\r\n  photoes: PropTypes.array,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    filter: '',\n  };\n\n  onSearchBtn = inputValue => {\n    if (inputValue === '') {\n      toast('Введите ваш запрос');\n      return;\n    }\n    this.setState({ filter: inputValue });\n  };\n\n  render() {\n    const { filter } = this.state;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSearchBtn} />\n        {filter && <ImageGallery filter={filter} />}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3uqMl\",\"form\":\"Searchbar_form__29rVg\",\"button\":\"Searchbar_button__2sY-i\",\"label\":\"Searchbar_label__23tvq\",\"input\":\"Searchbar_input__2yfIB\"};"],"sourceRoot":""}