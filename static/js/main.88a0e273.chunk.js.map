{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","services/pixabay-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","filter","onChangeInput","e","value","currentTarget","trim","setState","onSubmitForm","preventDefault","toast","props","onSubmit","className","s","searchbar","form","this","type","button","label","input","placeholder","onChange","inputValue","Component","ImageGalleryItem","url","name","key","onClick","item","src","alt","image","loading","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","closeModal","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","overlay","modal","width","height","api","fetchPhotoes","page","perPage","query","params","q","image_type","orientation","safesearch","per_page","axios","get","then","responce","data","ImageGallery","photoes","totalHits","status","index","onLoadMore","prevState","console","log","prevProps","prevFilter","newFilter","prevPage","newPage","hits","catch","finally","color","error","gallery","map","webformatURL","tags","Number","largeImageURL","App","onSearchBtn","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.88a0e273.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3uqMl\",\"form\":\"Searchbar_form__29rVg\",\"button\":\"Searchbar_button__2sY-i\",\"label\":\"Searchbar_label__23tvq\",\"input\":\"Searchbar_input__2yfIB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__8Uia7\",\"image\":\"ImageGalleryItem_image__7l7lY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1Q6hU\",\"modal\":\"Modal_modal__HFk5g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__xw7x2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__3DRaY\"};","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport s from './Searchbar.module.css';\r\nimport { toast } from 'react-toastify';\r\n\r\nclass Searchbar extends Component {\r\n  state = { filter: '' };\r\n\r\n  onChangeInput = e => {\r\n    const value = e.currentTarget.value.trim();\r\n    this.setState({ filter: value });\r\n  };\r\n\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    const { filter } = this.state;\r\n    if (filter === '') {\r\n      return toast('Введите ваш запрос');\r\n    }\r\n    this.props.onSubmit(filter);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.form} onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className={s.button}>\r\n            <span className={s.label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onChangeInput}\r\n            value={this.state.inputValue}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\nexport default Searchbar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ url, name, key, onClick }) => {\r\n  return (\r\n    <li key={key} className={s.item} onClick={onClick}>\r\n      <img src={url} alt={name} className={s.image} loading=\"lazy\" />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  url: PropTypes.number,\r\n  name: PropTypes.string,\r\n  id: PropTypes.number,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.closeModal();\r\n    }\r\n  };\r\n  handleBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.closeModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n    return createPortal(\r\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\r\n        <div className={s.modal}>\r\n          <img src={src} alt={alt} width=\"1024\" height=\"768\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  src: PropTypes.string,\r\n  alt: PropTypes.string,\r\n  closeModal: PropTypes.func,\r\n};\r\n","import axios from 'axios';\r\n\r\nfunction fetchPhotoes(page, perPage, query) {\r\n  const params = {\r\n    key: '22723314-dcec60eea06497913e1a2cdb4',\r\n    q: query,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: true,\r\n    page: page,\r\n    per_page: perPage,\r\n  };\r\n\r\n  const URL = 'https://pixabay.com/api/';\r\n  return axios.get(URL, { params }).then(responce => responce.data);\r\n}\r\nconst api = {\r\n  fetchPhotoes,\r\n};\r\nexport default api;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport Button from '../Button';\r\nimport Loader from 'react-loader-spinner';\r\nimport Modal from '../Modal';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport { toast } from 'react-toastify';\r\nimport s from './ImageGallery.module.css';\r\nimport api from '../../services/pixabay-api';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    page: null,\r\n    photoes: [],\r\n    perPage: 12,\r\n    totalHits: null,\r\n    status: 'idle',\r\n    filter: '',\r\n    index: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setState({ filter: this.props.filter, page: 1 });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevFilter = prevProps.filter;\r\n    const newFilter = this.props.filter;\r\n    if (prevFilter !== newFilter) {\r\n      this.setState({ page: 1, filter: newFilter });\r\n    }\r\n\r\n    const prevPage = prevState.page;\r\n    const newPage = this.state.page;\r\n\r\n    if (prevPage !== newPage) {\r\n      this.setState({ status: 'pending' });\r\n      api\r\n        .fetchPhotoes(newPage, this.state.perPage, newFilter)\r\n        .then(({ hits, totalHits }) => {\r\n          this.setState({ status: 'resolved', totalHits });\r\n          if (newPage === 1) {\r\n            this.setState({ photoes: hits });\r\n          }\r\n          if (newPage > 0) {\r\n            this.setState(prevState => ({ photoes: [...prevState.photoes, ...hits] }));\r\n          }\r\n        })\r\n        .catch(() => this.setState({ status: 'rejected' }))\r\n        .finally(console.log(this.state));\r\n    }\r\n  }\r\n\r\n  onLoadMore = () => {\r\n    this.setState(prevState => ({ page: prevState.page + 1 }));\r\n    console.log(this.state);\r\n  };\r\n\r\n  render() {\r\n    const { photoes, page, totalHits, status, index } = this.state;\r\n\r\n    if (status === 'idle') {\r\n      return (\r\n        <div>\r\n          <p>Загружаем...</p>\r\n        </div>\r\n      );\r\n    }\r\n    if (status === 'pending') {\r\n      return <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />;\r\n    }\r\n    if (status === 'rejected') {\r\n      return toast.error('Ваш запрос не найден');\r\n    }\r\n    if (status === 'resolved') {\r\n      return (\r\n        <>\r\n          <ul className={s.gallery}>\r\n            {photoes.map(({ webformatURL, tags }, index) => (\r\n              <ImageGalleryItem\r\n                url={webformatURL}\r\n                name={tags}\r\n                key={index}\r\n                onClick={() => {\r\n                  this.setState({ index });\r\n                  console.log(index);\r\n                }}\r\n              />\r\n            ))}\r\n          </ul>\r\n          <Button onClick={this.onLoadMore} />;\r\n        </>\r\n      );\r\n    }\r\n    if (Number(totalHits) >= Number(page) * 12 || status === 'resolved') {\r\n      return <Button onClick={this.onLoadMore} />;\r\n    }\r\n\r\n    if (index) {\r\n      return (\r\n        <Modal\r\n          src={photoes[index].largeImageURL}\r\n          alt={photoes[index].tags}\r\n          closeModal={() => this.setState({ index: null })}\r\n        />\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  filter: PropTypes.string,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    filter: '',\n  };\n\n  onSearchBtn = filter => {\n    this.setState({ filter });\n  };\n\n  render() {\n    const { filter } = this.state;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSearchBtn} />\n        {filter.length > 0 && <ImageGallery filter={filter} />}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}